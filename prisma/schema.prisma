// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model Polytechnic {
  polyID   Int       @id @default(autoincrement())
  name     String
  Diplomas Diploma[]
}

model Diploma {
  diplomaID   Int         @id @default(autoincrement())
  name        String
  polyID      Int
  Polytechnic Polytechnic @relation(fields: [polyID], references: [polyID])
  APCs        APC[]
}

model APC {
  diplomaID  Int     @unique
  majorID    Int
  courseCode String
  Diploma    Diploma @relation(fields: [diplomaID], references: [diplomaID])
  Major      Major   @relation(fields: [majorID], references: [majorID])
  Course     Course  @relation(fields: [courseCode], references: [code])
}

model UFaculty {
  facID  Int     @id @default(autoincrement())
  name   String
  Majors Major[]
}

model Major {
  majorID    Int          @id @default(autoincrement())
  name       String
  facID      Int
  totalCU    Int
  UFaculty   UFaculty     @relation(fields: [facID], references: [facID])
  Cohorts    Cohort[]
  APCs       APC[]
  Curriculum Curriculum[]
}

model Cohort {
  cohortID   Int          @id @default(autoincrement())
  name       String
  majorID    Int
  Major      Major        @relation(fields: [majorID], references: [majorID])
  Curriculum Curriculum[]
}

model Curriculum {
  majorID    Int     @unique
  cohortID   Int
  courseCode String
  wildcard   Boolean
  Major      Major   @relation(fields: [majorID], references: [majorID])
  Cohort     Cohort  @relation(fields: [cohortID], references: [cohortID])
  Course     Course  @relation(fields: [courseCode], references: [code])
}

model Course {
  code         String        @id
  name         String
  credit       Int
  APCs         APC[]
  Curricula    Curriculum[]
  TypeMappings TypeMapping[]
}

model CourseType {
  typeID       Int           @id @default(autoincrement())
  name         String
  TypeMappings TypeMapping[]
}

model TypeMapping {
  courseCode String     @unique
  typeID     Int
  Course     Course     @relation(fields: [courseCode], references: [code])
  CourseType CourseType @relation(fields: [typeID], references: [typeID])
}

model User {
  userId   String @id
  userName String
  password String
}
